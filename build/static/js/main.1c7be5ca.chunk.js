(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,a,t){e.exports=t(54)},35:function(e,a,t){},52:function(e,a,t){},54:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(25),c=t.n(r),s=(t(35),t(3)),o=t(4),i=t(6),u=t(5),m=t(7),h=t(10),g=t(8),d=t(55),p=t(56),b=l.a.createContext(null),f=t(13),E=t.n(f),v=(t(38),t(40),t(43),{apiKey:"AIzaSyDni4UflIR1JzzSmNdyUfOUIWx9x0nzGM8",authDomain:"cat-243915.firebaseapp.com",databaseURL:"https://cat-243915.firebaseio.com",projectId:"youtube-cat-243915",storageBucket:"youtube-cat-243915.appspot.com",messagingSenderId:"719371077954",appId:"1:719371077954:web:12eebc6a33e42ddc"}),y=function e(){var a=this;Object(s.a)(this,e),this.onAuthUserListener=function(e,t){return a.auth.onAuthStateChanged(function(n){n?a.user(n.uid).get().then(function(a){var t=a.data();t.roles||(t.roles={}),n=Object(g.a)({uid:n.uid,email:n.email},t),e(n)}):t()})},this.doCreateUserWithEmailAndPassword=function(e,t){return a.auth.createUserWithEmailAndPassword(e,t)},this.doSignInWithEmailAndPassword=function(e,t){return a.auth.signInWithEmailAndPassword(e,t)},this.doSignInWithGoogle=function(){return a.auth.signInWithPopup(a.googleProvider)},this.doSignOut=function(){return a.auth.signOut()},this.doPasswordReset=function(e){return a.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return a.auth.currentUser.updatePassword(e)},this.user=function(e){return a.db.doc("users/".concat(e))},this.users=function(){return a.db.collection("users")},E.a.initializeApp(v),this.fieldValue=E.a.firestore.FieldValue,this.auth=E.a.auth(),this.db=E.a.firestore(),this.googleProvider=new E.a.auth.GoogleAuthProvider},k={username:"",email:"",password:"",retypePassword:"",error:null},C=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).state=Object(g.a)({},k),t.handleOnChange=function(e){t.setState(t.setState(Object(h.a)({},e.target.name,e.target.value)))},t.onSubmit=function(e,a){console.log(e);var n=t.state,l=n.email,r=n.password,c=n.username;e.firebase.doCreateUserWithEmailAndPassword(l,r).then(function(a){return e.firebase.user(a.user.uid).set({username:c,email:l},{merge:!0})}).then(function(e){t.setState(Object(g.a)({},k)),t.props.changePage("LogIn")}).catch(function(e){t.setState({error:e})}),a.preventDefault()},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.username,n=a.email,r=a.password,c=a.retypePassword,s=a.error,o=""===r||r!==c||""===t;return l.a.createElement(b.Consumer,null,function(a){return l.a.createElement("div",{className:"container"},l.a.createElement("h1",{className:"toptext"},"Sign Up"),l.a.createElement(d.a,{placeholder:"Username",name:"username",onChange:e.handleOnChange,value:t}),l.a.createElement(d.a,{placeholder:"Email",name:"email",onChange:e.handleOnChange,value:n}),l.a.createElement(d.a,{placeholder:"Password",name:"password",type:"password",onChange:e.handleOnChange,value:r}),l.a.createElement(d.a,{placeholder:"Retype Password",name:"retypePassword",type:"password",onChange:e.handleOnChange,value:c}),l.a.createElement(p.a,{className:"signup",disabled:o,color:"primary",type:"submit",onClick:function(t){return e.onSubmit({firebase:a},t)}},"Sign Up")," ",l.a.createElement("br",null),s&&l.a.createElement("p",null,s.message),"Already have an account?"," ",l.a.createElement("br",null),l.a.createElement("span",{className:"linking",onClick:function(){return e.props.changePage("LogIn")}},"Sign in"))})}}]),a}(n.Component),S={email:"",password:"",error:null},w=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).state=Object(g.a)({},S),t.handleOnChange=function(e){t.setState(t.setState(Object(h.a)({},e.target.name,e.target.value)))},t.onSubmit=function(e,a){console.log(e);var n=t.state,l=n.email,r=n.password;e.firebase.doSignInWithEmailAndPassword(l,r).then(function(a){console.log("logged in"),t.setState(Object(g.a)({},S)),e.firebase.auth.onAuthStateChanged(function(e){console.log("going to welcome"),t.props.changeAuth(e),t.props.changePage("Welcome")}).catch(function(e){console.log("inner errors: ",e)})}).catch(function(e){t.setState({error:e}),console.log("errors: ",t.state.error)}),a.preventDefault()},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.email,n=a.password,r=a.error,c=""===n||""===t;return l.a.createElement(b.Consumer,null,function(a){return l.a.createElement("div",{className:"container"},l.a.createElement("h1",{className:"toptext"},"Sign In"),l.a.createElement(d.a,{className:"signin-input",placeholder:"Email",name:"email",onChange:e.handleOnChange,value:t}),l.a.createElement(d.a,{className:"signin-input",placeholder:"Password",name:"password",type:"password",onChange:e.handleOnChange,value:n}),l.a.createElement(p.a,{className:"signin",disabled:c,color:"primary",type:"submit",onClick:function(t){return e.onSubmit({firebase:a},t)}},"Sign In"),r&&l.a.createElement("p",null,r.message),l.a.createElement("span",{className:"linking",onClick:function(){return e.props.changePage("ForgotPassword")}},"Forgot Password?"),l.a.createElement("br",null),l.a.createElement("br",null),"Don't have an account?"," ",l.a.createElement("br",null),l.a.createElement("span",{className:"linking",onClick:function(){return e.props.changePage("SignUp")}},"Sign Up"),l.a.createElement("br",null),l.a.createElement("br",null))})}}]),a}(n.Component),O=t(22),P=t.n(O),A=t(27),j=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).state={selectAllChecked:!0,blockedCategories:null},t.handleSavePreferences=function(e){for(var a=document.getElementsByClassName("enableKey"),n=[],l=[],r=0;r<a.length;r++)a[r].checked&&(n.push(a[r].value),l.push(a[r].name));chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendMessage(e[0].id,{todo:"changePreferences",categories:l}),console.log("sending message about cats")}),localStorage.setItem("blockedCategories",JSON.stringify(n)),e.user(t.props.authUser.uid).set({blockedCategories:n},{merge:!0}),console.log(n)},t.handleSelectAll=function(){if(t.setState({selectAllChecked:!t.state.selectAllChecked}),t.state.selectAllChecked)for(var e=document.getElementsByClassName("enableKey"),a=0;a<e.length;a++)e[a].checked=!0;else for(var n=document.getElementsByClassName("enableKey"),l=0;l<n.length;l++)n[l].checked=!1},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(A.a)(P.a.mark(function e(){var a=this;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.firebase.user(this.props.authUser.uid).onSnapshot(function(e){a.setState({blockedCategories:e.data()},function(){var e=a.state.blockedCategories;if(null!==e&&void 0!==e&&void 0!==e.blockedCategories){var t=document.getElementsByClassName("enableKey"),n=e.blockedCategories;console.log("blocked cats: ",e.blockedCategories);for(var l=0;l<n.length;l++)console.log("element:",n[l]),t[n[l]].checked=!0}})});case 2:e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("h3",{className:"toptext"},"Blocked categories:"),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"checkbox-group"},l.a.createElement("ul",{className:"blockedcategories"},l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"-1",id:"selectAll",onClick:this.handleSelectAll}),"Select all"),l.a.createElement("br",null),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"0",name:"Auto & Vehicles",class:"enableKey"}),"Auto & Vehicles"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"1",name:"Beauty & Fashion",class:"enableKey"}),"Beauty & Fashion"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"2",name:"Comedy",class:"enableKey"}),"Comedy"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"3",name:"Education",class:"enableKey"}),"Education"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"4",name:"Entertainment",class:"enableKey"}),"Entertainment"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"5",name:"Family Entertainment",class:"enableKey"}),"Family Entertainment"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"6",name:"Film & Animation",class:"enableKey"}),"Film & Animation"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"7",name:"Food",class:"enableKey"}),"Food"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"8",name:"Gaming",class:"enableKey"}),"Gaming"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"9",name:"How-to & Style",class:"enableKey"}),"Howto & Style"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"10",name:"Music",class:"enableKey"}),"Music"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"11",name:"News & Politics",class:"enableKey"}),"News & Politics"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"12",name:"Nonprofits & Activism",class:"enableKey"}),"Nonprofits & Activism"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"13",name:"People & Blogs",class:"enableKey"}),"People & Blogs"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"14",name:"Pets & Animals",class:"enableKey"}),"Pets & Animals"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"15",name:"Science & Technology",class:"enableKey"}),"Science & Technology"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"16",name:"Sports",class:"enableKey"}),"Sports"),l.a.createElement("li",null,l.a.createElement("input",{type:"checkbox",value:"17",name:"Travel & Events",class:"enableKey"}),"Travel & Events")),l.a.createElement("div",{class:"buttonwrapper"},l.a.createElement("button",{id:"savePreferences",class:"savePreferences",onClick:function(){return e.handleSavePreferences(e.props.firebase)}},"Begin block!")))))}}]),a}(n.Component),U={email:"",error:null},N=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).state=Object(g.a)({},U,{resetEmailSent:!1}),t.handleOnChange=function(e){t.setState(t.setState(Object(h.a)({},e.target.name,e.target.value)))},t.onSubmit=function(e,a){console.log(e);var n=t.state.email;e.firebase.doPasswordReset(n).then(function(e){console.log("reset email sent"),t.setState(Object(g.a)({},U,{resetEmailSent:!0}))}).catch(function(e){t.setState({error:e})}),a.preventDefault()},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.email,n=a.resetEmailSent,r=a.error,c=""===t;return l.a.createElement(b.Consumer,null,function(a){return l.a.createElement("div",{className:"container"},l.a.createElement("h1",{className:"toptext"},"Reset Password"),l.a.createElement(d.a,{placeholder:"Email",name:"email",onChange:e.handleOnChange,value:t}),l.a.createElement(p.a,{className:"resetpass",disabled:c,color:"primary",type:"submit",onClick:function(t){return e.onSubmit({firebase:a},t)}},"Send email to reset"),r&&l.a.createElement("p",null,r.message),n&&l.a.createElement("div",null,l.a.createElement("p",null,"An email has been sent to reset your password")))})}}]),a}(n.Component),x=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).state={},t.handleSignOut=function(e){e.doSignOut().then(function(a){console.log("signout"),e.auth.onAuthStateChanged(function(e){t.props.changeAuth("null"),t.props.changePage("LogIn")})})},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this;return console.log("local storage: ",this.props.authUser),l.a.createElement(b.Consumer,null,function(a){return l.a.createElement("div",null,l.a.createElement("p",{className:"toptext"},"Meow! Click the button below and block to your heart's content!"),l.a.createElement("br",null),l.a.createElement(p.a,{className:"block",color:"primary",onClick:function(){return e.props.changePage("BlockedCategories")}},"Block Categories"),l.a.createElement("br",null),l.a.createElement(p.a,{className:"signout",onClick:function(){return e.handleSignOut(a)}},"Sign Out"))})}}]),a}(n.Component),I=t(28),K=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={page:"",authUser:"null"!==localStorage.getItem("authUser")?JSON.parse(localStorage.getItem("authUser")):"null"!==localStorage.getItem("authUser")},t.handlePages=function(e){t.setState({page:e})},t.handleAuthUser=function(e){t.setState({authUser:e}),"null"!==e?localStorage.setItem("authUser",JSON.stringify(e)):localStorage.setItem("authUser",e)},t.handleBack=function(){"SignUp"===t.state.page||"ForgotPassword"===t.state.page?t.handlePages("LogIn"):"BlockedCategories"===t.state.page&&t.handlePages("Welcome")},t.renderBack=function(){return console.log(t.state.page),"LogIn"===t.state.page||""===t.state.page||"Welcome"===t.state.page?l.a.createElement("div",null):l.a.createElement(I.a,{className:"backButton",icon:["fas","arrow-left"],size:"lg"})},t.renderComponent=function(){switch(t.state.page){case"LogIn":return l.a.createElement(w,{changePage:t.handlePages,changeAuth:t.handleAuthUser,page:t.state.page});case"SignUp":return l.a.createElement(C,{changePage:t.handlePages});case"ForgotPassword":return l.a.createElement(N,{changePage:t.handlePages});case"Welcome":return l.a.createElement(x,{changePage:t.handlePages,changeAuth:t.handleAuthUser,authUser:t.state.authUser});case"BlockedCategories":return l.a.createElement(b.Consumer,null,function(e){return l.a.createElement(j,{changePage:t.handlePages,authUser:t.state.authUser,firebase:e})});default:return"null"!==t.state.authUser&&null!==t.state.authUser&&!1!==t.state.authUser?l.a.createElement(x,{changePage:t.handlePages,changeAuth:t.handleAuthUser,authUser:t.state.authUser}):l.a.createElement(w,{changePage:t.handlePages,changeAuth:t.handleAuthUser,page:t.state.page})}},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"container flexing"},l.a.createElement("div",{className:"flex1",onClick:this.handleBack},this.renderBack()),l.a.createElement("div",{className:"flex2"},this.renderComponent()))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(52),t(53);var B=t(14),W=t(29);B.b.add(W.a),c.a.render(l.a.createElement(b.Provider,{value:new y},l.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.1c7be5ca.chunk.js.map